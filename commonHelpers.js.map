{"version":3,"file":"commonHelpers.js","sources":["../src/main.js"],"sourcesContent":["import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nconst form = document.querySelector(\".form\");\nconst gallery = document.querySelector(\".gallery\");\nconst loader = document.querySelector(\".loader\");\n\nconst lightbox = new SimpleLightbox('.gallery a', { captionsData: 'alt', captionDelay: 250 });\n\nform.addEventListener(\"submit\", (event) => {\n    event.preventDefault();\n    showLoader();\n    gallery.innerHTML = \"\";\n\n    const q = event.currentTarget.elements.search.value.trim();\n   \n    if (q.length === 0) {\n        showErrorToast(\"Sorry, there are no images matching your search query. Please try again!Reqest is not ok\");\n        hideLoader();\n    } else {\n        renderIMG(q);\n    }\n});\n\nconst getIMG = (query = \"\") => {\n    const url = \"https://pixabay.com/api/\";\n    const searchParams = new URLSearchParams({\n        key: \"41729431-93e496ed3cd794296b45db789\",\n        q: query,\n        image_type: \"photo\",\n        orientation: \"horizontal\",\n        safesearch: \"true\"\n    });\n\n    return fetch(`${url}?${searchParams}`)\n        .then(response => {\n            if (!response.ok) {\n                showErrorToast(\"Sorry, there are no images matching your search query. Please try again!Reqest is not ok\");\n                return;\n            }\n            return response.json();\n        })\n        .then(data => {\n            if (data.hits.length) {\n                return data.hits;\n            } else {\n                showErrorToast(\"Sorry, there are no images matching your search query. Please try again!Reqest is not ok\");\n                hideLoader();\n            }\n        })\n        .finally(hideLoader);\n}\n\nconst getImageHTML = ({largeImageURL, webformatURL, tags, likes, views, comments, downloads}) => `           \n    <li class=\"gallery-item\">\n        <div class=gallery-card>\n            <a class=\"gallery-link\" href=\"${largeImageURL}\">\n                <img class=\"gallery-image\" src=\"${webformatURL}\" alt=\"${tags}\" width:\"360\" height:\"200\" />\n            </a>\n\n            <ul class=\"gallery-card-list\">\n                <li class=\"gallery-card-item\">\n                    <h2 class=\"gallery-card-title\">Likes</h2>\n                    <p class=\"gallery-card-information\">${likes}</p>\n                </li>\n                <li class=\"gallery-card-item\">\n                    <h2 class=\"gallery-card-title\">Views</h2>\n                    <p class=\"gallery-card-information\">${views}</p>\n                </li>\n                <li class=\"gallery-card-item\">\n                    <h2 class=\"gallery-card-title\">Comments</h2>\n                    <p class=\"gallery-card-information\">${comments}</p>\n                </li>\n                <li class=\"gallery-card-item\">\n                    <h2 class=\"gallery-card-title\">Downloads</h2>\n                    <p class=\"gallery-card-information\">${downloads}</p>\n                </li>\n            </ul>\n        </div>\n    </li>\n`\n\nfunction renderIMG(q) {\n    getIMG(q)\n        .then(images => {\n            if (images === undefined) {\n                return;\n            } else {\n                const markup = images.map((image => {\n                    return getImageHTML(image);\n                })).join(\"\");\n\n                gallery.insertAdjacentHTML(\"beforeend\", markup);\n                lightbox.refresh();         \n                hideLoader();\n            }\n        })\n        .catch(error => {\n            console.log(error);\n            hideLoader();\n            showErrorToast(\"Sorry, there are no images matching your search query. Please try again!Reqest is not ok\");\n        });\n}\n\nfunction showLoader() {\n    loader.classList.add('loading');\n}\n\nfunction hideLoader() {\n    loader.classList.remove('loading');\n}\n\nfunction showErrorToast(message) {\n    iziToast.show({\n        title: message,\n        titleColor: 'white',\n        color: 'white',\n        backgroundColor: 'red',\n        position: 'topRight',\n    });\n}\n"],"names":["form","gallery","loader","lightbox","SimpleLightbox","event","showLoader","q","showErrorToast","hideLoader","renderIMG","getIMG","query","url","searchParams","response","data","getImageHTML","largeImageURL","webformatURL","tags","likes","views","comments","downloads","images","markup","image","error","message","iziToast"],"mappings":"6vBAKA,MAAMA,EAAO,SAAS,cAAc,OAAO,EACrCC,EAAU,SAAS,cAAc,UAAU,EAC3CC,EAAS,SAAS,cAAc,SAAS,EAEzCC,EAAW,IAAIC,EAAe,aAAc,CAAE,aAAc,MAAO,aAAc,GAAG,CAAE,EAE5FJ,EAAK,iBAAiB,SAAWK,GAAU,CACvCA,EAAM,eAAc,EACpBC,IACAL,EAAQ,UAAY,GAEpB,MAAMM,EAAIF,EAAM,cAAc,SAAS,OAAO,MAAM,OAEhDE,EAAE,SAAW,GACbC,EAAe,0FAA0F,EACzGC,KAEAC,EAAUH,CAAC,CAEnB,CAAC,EAED,MAAMI,EAAS,CAACC,EAAQ,KAAO,CAC3B,MAAMC,EAAM,2BACNC,EAAe,IAAI,gBAAgB,CACrC,IAAK,qCACL,EAAGF,EACH,WAAY,QACZ,YAAa,aACb,WAAY,MACpB,CAAK,EAED,OAAO,MAAM,GAAGC,KAAOC,GAAc,EAChC,KAAKC,GAAY,CACd,GAAI,CAACA,EAAS,GAAI,CACdP,EAAe,0FAA0F,EACzG,MACH,CACD,OAAOO,EAAS,MAC5B,CAAS,EACA,KAAKC,GAAQ,CACV,GAAIA,EAAK,KAAK,OACV,OAAOA,EAAK,KAEZR,EAAe,0FAA0F,EACzGC,GAEhB,CAAS,EACA,QAAQA,CAAU,CAC3B,EAEMQ,EAAe,CAAC,CAAC,cAAAC,EAAe,aAAAC,EAAc,KAAAC,EAAM,MAAAC,EAAO,MAAAC,EAAO,SAAAC,EAAU,UAAAC,CAAS,IAAM;AAAA;AAAA;AAAA,4CAGrDN;AAAA,kDACMC,WAAsBC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,0DAMdC;AAAA;AAAA;AAAA;AAAA,0DAIAC;AAAA;AAAA;AAAA;AAAA,0DAIAC;AAAA;AAAA;AAAA;AAAA,0DAIAC;AAAA;AAAA;AAAA;AAAA;AAAA,EAO1D,SAASd,EAAUH,EAAG,CAClBI,EAAOJ,CAAC,EACH,KAAKkB,GAAU,CACZ,GAAIA,IAAW,OAER,CACH,MAAMC,EAASD,EAAO,IAAKE,GAChBV,EAAaU,CAAK,GACzB,KAAK,EAAE,EAEX1B,EAAQ,mBAAmB,YAAayB,CAAM,EAC9CvB,EAAS,QAAO,EAChBM,GACH,CACb,CAAS,EACA,MAAMmB,GAAS,CACZ,QAAQ,IAAIA,CAAK,EACjBnB,IACAD,EAAe,0FAA0F,CACrH,CAAS,CACT,CAEA,SAASF,GAAa,CAClBJ,EAAO,UAAU,IAAI,SAAS,CAClC,CAEA,SAASO,GAAa,CAClBP,EAAO,UAAU,OAAO,SAAS,CACrC,CAEA,SAASM,EAAeqB,EAAS,CAC7BC,EAAS,KAAK,CACV,MAAOD,EACP,WAAY,QACZ,MAAO,QACP,gBAAiB,MACjB,SAAU,UAClB,CAAK,CACL"}